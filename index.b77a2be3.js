var e=globalThis,t={},o={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in o){var r=o[e];delete o[e];var p={id:e,exports:{}};return t[e]=p,r.call(p.exports,p,p.exports),p.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},e.parcelRequired7c6=r),r.register;var p=r("lXnOV");let s=null;const n=document.querySelector(".popup__img"),i=document.querySelector(".popup__amazon"),c=document.querySelector(".popup__description-details"),l=document.querySelector(".popup__btn-add"),d=document.querySelector(".popup__btn-remove"),a=document.querySelector(".popup__btn-close"),u=document.querySelector(".backdrop-popup"),_=document.querySelector(".popup"),m=document.querySelector(".popup__comment"),v=document.querySelector(".popup__shops-list");let h=!1;const k=()=>{h?(l.classList.add("popup__btn-text-hidden"),d.classList.remove("popup__btn-text-hidden"),m.classList.remove("popup__btn-text-hidden")):(l.classList.remove("popup__btn-text-hidden"),d.classList.add("popup__btn-text-hidden"),m.classList.add("popup__btn-text-hidden"))},L=async e=>{let t=await (0,p.fetchBookById)(e);s=t;let o=JSON.parse(localStorage.getItem("books"))||[];h=o.some(e=>e._id===t._id),k(),n.src=t.book_image,i.href=t.amazon_product_url;let r=`<h2 class="popup__title">${t.title}</h2>
                <p class="popup__author">${t.author}</p>
                <p class="popup__text">${t.description}</p>`;c.innerHTML=r;let l=t.buy_links.slice(1).map(e=>`<li class="popup__shops-item"><a class="popup__shops-link" href="${e.url}" target="_blank">${e.name}</a></li>`).join("");v.innerHTML=l},S=()=>{u.classList.add("popup-is-hidden"),a.removeEventListener("click",S),u.removeEventListener("click",g),document.removeEventListener("keydown",b)},g=e=>{e.target===u&&S()};_.addEventListener("click",e=>{e.stopPropagation()});const b=e=>{"Escape"===e.code&&S()},y=document.querySelector(".open-list");y.addEventListener("click",e=>{if(e.target.closest("li")){let t=e.target.closest("li").dataset.id;L(t),a.addEventListener("click",S),u.addEventListener("click",g),document.addEventListener("keydown",b),u.classList.remove("popup-is-hidden")}}),d.addEventListener("click",()=>{if(!s)return;let e=JSON.parse(localStorage.getItem("books"))||[],t=e.filter(e=>e._id!==s._id);localStorage.setItem("books",JSON.stringify(t)),h=!1,k()}),l.addEventListener("click",()=>{if(!s)return;let e=JSON.parse(localStorage.getItem("books"))||[],t=e.some(e=>e._id===s._id);t||(e.push(s),localStorage.setItem("books",JSON.stringify(e))),h=!0,k()});// toggleDarkThemePopUp();
// openPopUp();
// localStorage.clear();
//# sourceMappingURL=index.b77a2be3.js.map

//# sourceMappingURL=index.b77a2be3.js.map
