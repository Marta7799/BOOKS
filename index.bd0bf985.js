var e=globalThis,t={},o={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in o){var r=o[e];delete o[e];var s={id:e,exports:{}};return t[e]=s,r.call(s.exports,s,s.exports),s.exports}var p=Error("Cannot find module '"+e+"'");throw p.code="MODULE_NOT_FOUND",p}).register=function(e,t){o[e]=t},e.parcelRequired7c6=r),r.register;var s=r("lXnOV");let p=null;const n=document.querySelector(".popup__img"),i=document.querySelector(".popup__amazon"),c=document.querySelector(".popup__description-details"),l=document.querySelector(".popup__btn-add"),d=document.querySelector(".popup__btn-remove"),a=document.querySelector(".popup__btn-close"),u=document.querySelector(".backdrop-popup"),_=document.querySelector(".popup"),m=document.querySelector(".popup__comment"),v=document.querySelector(".popup__shops-list"),k=document.querySelector(".category__list"),g=document.querySelector(".books-gallery__section");let L=!1;const S=()=>{L?(l.classList.add("popup__btn-text-hidden"),d.classList.remove("popup__btn-text-hidden"),m.classList.remove("popup__btn-text-hidden")):(l.classList.remove("popup__btn-text-hidden"),d.classList.add("popup__btn-text-hidden"),m.classList.add("popup__btn-text-hidden"))},h=async e=>{let t=await (0,s.fetchBookById)(e);p=t;let o=JSON.parse(localStorage.getItem("books"))||[];L=o.some(e=>e._id===t._id),S(),n.src=t.book_image,i.href=t.amazon_product_url;let r=`<h2 class="popup__title">${t.title}</h2>
                <p class="popup__author">${t.author}</p>
                <p class="popup__text">${t.description}</p>`;c.innerHTML=r;let l=t.buy_links.slice(1).map(e=>`<li class="popup__shops-item"><a class="popup__shops-link" href="${e.url}" target="_blank">${e.name}</a></li>`).join("");v.innerHTML=l},y=()=>{u.classList.add("popup-is-hidden"),a.removeEventListener("click",y),u.removeEventListener("click",b),document.removeEventListener("keydown",f)},b=e=>{e.target===u&&y()};_.addEventListener("click",e=>{e.stopPropagation()});const f=e=>{"Escape"===e.code&&y()},q=e=>{if(e.target.closest("li")){let t=e.target.closest("li").dataset.id;h(t),a.addEventListener("click",y),u.addEventListener("click",b),document.addEventListener("keydown",f),u.classList.remove("popup-is-hidden")}};k.addEventListener("click",q),g.addEventListener("click",q),d.addEventListener("click",()=>{if(!p)return;let e=JSON.parse(localStorage.getItem("books"))||[],t=e.filter(e=>e._id!==p._id);localStorage.setItem("books",JSON.stringify(t)),L=!1,S()}),l.addEventListener("click",()=>{if(!p)return;let e=JSON.parse(localStorage.getItem("books"))||[],t=e.some(e=>e._id===p._id);t||(e.push(p),localStorage.setItem("books",JSON.stringify(e))),L=!0,S()});// toggleDarkThemePopUp();
// openPopUp();
// localStorage.clear();
//# sourceMappingURL=index.bd0bf985.js.map

//# sourceMappingURL=index.bd0bf985.js.map
