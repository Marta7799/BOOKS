{"mappings":"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","sources":["<anon>","src/js/pop-up.js"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequired7c6\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequired7c6\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $lXnOV = parcelRequire(\"lXnOV\");\n\"use strict\";\nlet $ac63d267681cf759$var$currentBookData = null;\nconst $ac63d267681cf759$var$bookCover = document.querySelector(\".popup__img\");\nconst $ac63d267681cf759$var$bookAmazonLink = document.querySelector(\".popup__amazon\");\nconst $ac63d267681cf759$var$bookDescription = document.querySelector(\".popup__description-details\");\nconst $ac63d267681cf759$var$btnAddToShoppingList = document.querySelector(\".popup__btn-add\");\nconst $ac63d267681cf759$var$btnRemoveFromShoppingList = document.querySelector(\".popup__btn-remove\");\nconst $ac63d267681cf759$var$btnClosePopUp = document.querySelector(\".popup__btn-close\");\nconst $ac63d267681cf759$var$backdrop = document.querySelector(\".backdrop-popup\");\nconst $ac63d267681cf759$var$popUp = document.querySelector(\".popup\");\nconst $ac63d267681cf759$var$comment = document.querySelector(\".popup__comment\");\nconst $ac63d267681cf759$var$shopsList = document.querySelector(\".popup__shops-list\");\nconst $ac63d267681cf759$var$listBooks = document.querySelector(\".category__list\");\nconst $ac63d267681cf759$var$listBooksInCategories = document.querySelector(\".books-gallery__section\");\nlet $ac63d267681cf759$var$isBookAlreadyInShoppingList = false;\nconst $ac63d267681cf759$var$toggleButtonsVisibility = ()=>{\n    if ($ac63d267681cf759$var$isBookAlreadyInShoppingList) {\n        $ac63d267681cf759$var$btnAddToShoppingList.classList.add(\"popup__btn-text-hidden\");\n        $ac63d267681cf759$var$btnRemoveFromShoppingList.classList.remove(\"popup__btn-text-hidden\");\n        $ac63d267681cf759$var$comment.classList.remove(\"popup__btn-text-hidden\");\n    } else {\n        $ac63d267681cf759$var$btnAddToShoppingList.classList.remove(\"popup__btn-text-hidden\");\n        $ac63d267681cf759$var$btnRemoveFromShoppingList.classList.add(\"popup__btn-text-hidden\");\n        $ac63d267681cf759$var$comment.classList.add(\"popup__btn-text-hidden\");\n    }\n};\nconst $ac63d267681cf759$var$addToLocalStorage = ()=>{\n    if (!$ac63d267681cf759$var$currentBookData) return;\n    const storedBooks = JSON.parse(localStorage.getItem(\"books\")) || [];\n    const bookExists = storedBooks.some((book)=>book._id === $ac63d267681cf759$var$currentBookData._id);\n    if (!bookExists) {\n        storedBooks.push($ac63d267681cf759$var$currentBookData);\n        localStorage.setItem(\"books\", JSON.stringify(storedBooks));\n    }\n    $ac63d267681cf759$var$isBookAlreadyInShoppingList = true;\n    $ac63d267681cf759$var$toggleButtonsVisibility();\n};\nconst $ac63d267681cf759$var$removeFromLocalStorage = ()=>{\n    if (!$ac63d267681cf759$var$currentBookData) return;\n    const storedBooks = JSON.parse(localStorage.getItem(\"books\")) || [];\n    const updatedBooks = storedBooks.filter((book)=>book._id !== $ac63d267681cf759$var$currentBookData._id);\n    localStorage.setItem(\"books\", JSON.stringify(updatedBooks));\n    $ac63d267681cf759$var$isBookAlreadyInShoppingList = false;\n    $ac63d267681cf759$var$toggleButtonsVisibility();\n};\nconst $ac63d267681cf759$var$createPopUp = async (bookId)=>{\n    const bookData = await (0, $lXnOV.fetchBookById)(bookId);\n    $ac63d267681cf759$var$currentBookData = bookData;\n    const storedBooks = JSON.parse(localStorage.getItem(\"books\")) || [];\n    $ac63d267681cf759$var$isBookAlreadyInShoppingList = storedBooks.some((book)=>book._id === bookData._id);\n    $ac63d267681cf759$var$toggleButtonsVisibility();\n    $ac63d267681cf759$var$bookCover.src = bookData.book_image;\n    $ac63d267681cf759$var$bookAmazonLink.href = bookData.amazon_product_url;\n    const markup = `<h2 class=\"popup__title\">${bookData.title}</h2>\n                <p class=\"popup__author\">${bookData.author}</p>\n                <p class=\"popup__text\">${bookData.description}</p>`;\n    $ac63d267681cf759$var$bookDescription.innerHTML = markup;\n    const shopsBooks = bookData.buy_links.slice(1).map((link)=>`<li class=\"popup__shops-item\"><a class=\"popup__shops-link\" href=\"${link.url}\" target=\"_blank\">${link.name}</a></li>`).join(\"\");\n    $ac63d267681cf759$var$shopsList.innerHTML = shopsBooks;\n};\nconst $ac63d267681cf759$var$closePopUp = ()=>{\n    $ac63d267681cf759$var$backdrop.classList.add(\"popup-is-hidden\");\n    $ac63d267681cf759$var$btnClosePopUp.removeEventListener(\"click\", $ac63d267681cf759$var$closePopUp);\n    $ac63d267681cf759$var$backdrop.removeEventListener(\"click\", $ac63d267681cf759$var$backdropClickHandler);\n    document.removeEventListener(\"keydown\", $ac63d267681cf759$var$keydownHandler);\n};\nconst $ac63d267681cf759$var$backdropClickHandler = (event)=>{\n    if (event.target === $ac63d267681cf759$var$backdrop) $ac63d267681cf759$var$closePopUp();\n};\n$ac63d267681cf759$var$popUp.addEventListener(\"click\", (event)=>{\n    event.stopPropagation();\n});\nconst $ac63d267681cf759$var$keydownHandler = (e)=>{\n    if (e.code === \"Escape\") $ac63d267681cf759$var$closePopUp();\n};\nconst $ac63d267681cf759$var$openPopUp = (e)=>{\n    if (e.target.closest(\"li\")) {\n        const bookId = e.target.closest(\"li\").dataset.id;\n        $ac63d267681cf759$var$createPopUp(bookId);\n        $ac63d267681cf759$var$btnClosePopUp.addEventListener(\"click\", $ac63d267681cf759$var$closePopUp);\n        $ac63d267681cf759$var$backdrop.addEventListener(\"click\", $ac63d267681cf759$var$backdropClickHandler);\n        document.addEventListener(\"keydown\", $ac63d267681cf759$var$keydownHandler);\n        $ac63d267681cf759$var$backdrop.classList.remove(\"popup-is-hidden\");\n    }\n};\n$ac63d267681cf759$var$listBooks.addEventListener(\"click\", $ac63d267681cf759$var$openPopUp);\n$ac63d267681cf759$var$listBooksInCategories.addEventListener(\"click\", $ac63d267681cf759$var$openPopUp);\n$ac63d267681cf759$var$btnRemoveFromShoppingList.addEventListener(\"click\", $ac63d267681cf759$var$removeFromLocalStorage);\n$ac63d267681cf759$var$btnAddToShoppingList.addEventListener(\"click\", $ac63d267681cf759$var$addToLocalStorage);\nconst $ac63d267681cf759$var$toggleDarkThemePopUp = ()=>{\n    const btnAddToShoppingList = document.querySelector(\".popup__btn-add\");\n    const btnRemoveFromShoppingList = document.querySelector(\".popup__btn-remove\");\n    const popUp = document.querySelector(\".popup\");\n    const comment = document.querySelector(\".popup__comment\");\n    const iconClose = document.querySelector(\".popup__icon-close\");\n    const amazonLogo = document.querySelector(\".popup__amazon\");\n    popUp.classList.toggle(\"popup-dark-theme\");\n    iconClose.classList.toggle(\"icon-close-dark-theme\");\n    btnAddToShoppingList.classList.toggle(\"btn-add-dark-theme\");\n    btnRemoveFromShoppingList.classList.toggle(\"btn-remove-dark-theme\");\n    comment.classList.toggle(\"comment-dark-theme\");\n    amazonLogo.classList.toggle(\"amazon-dark-theme\");\n}; // toggleDarkThemePopUp();\n // openPopUp();\n // localStorage.clear();\n\n\n//# sourceMappingURL=index.bd0bf985.js.map\n","'use strict';\nimport { fetchBookById } from './api';\n\nlet currentBookData = null;\n\nconst bookCover = document.querySelector('.popup__img');\nconst bookAmazonLink = document.querySelector('.popup__amazon');\nconst bookDescription = document.querySelector('.popup__description-details');\nconst btnAddToShoppingList = document.querySelector('.popup__btn-add');\nconst btnRemoveFromShoppingList = document.querySelector('.popup__btn-remove');\nconst btnClosePopUp = document.querySelector('.popup__btn-close');\nconst backdrop = document.querySelector('.backdrop-popup');\nconst popUp = document.querySelector('.popup');\nconst comment = document.querySelector('.popup__comment');\nconst shopsList = document.querySelector('.popup__shops-list');\n\nconst listBooks = document.querySelector('.category__list');\nconst listBooksInCategories = document.querySelector('.books-gallery__section');\n\nlet isBookAlreadyInShoppingList = false;\n\nconst toggleButtonsVisibility = () => {\n  if (isBookAlreadyInShoppingList) {\n    btnAddToShoppingList.classList.add('popup__btn-text-hidden');\n    btnRemoveFromShoppingList.classList.remove('popup__btn-text-hidden');\n    comment.classList.remove('popup__btn-text-hidden');\n  } else {\n    btnAddToShoppingList.classList.remove('popup__btn-text-hidden');\n    btnRemoveFromShoppingList.classList.add('popup__btn-text-hidden');\n    comment.classList.add('popup__btn-text-hidden');\n  }\n};\n\nconst addToLocalStorage = () => {\n  if (!currentBookData) return;\n\n  const storedBooks = JSON.parse(localStorage.getItem('books')) || [];\n  const bookExists = storedBooks.some(book => book._id === currentBookData._id);\n\n  if (!bookExists) {\n    storedBooks.push(currentBookData);\n    localStorage.setItem('books', JSON.stringify(storedBooks));\n  }\n\n  isBookAlreadyInShoppingList = true;\n  toggleButtonsVisibility();\n};\n\nconst removeFromLocalStorage = () => {\n  if (!currentBookData) return;\n\n  const storedBooks = JSON.parse(localStorage.getItem('books')) || [];\n  const updatedBooks = storedBooks.filter(book => book._id !== currentBookData._id);\n\n  localStorage.setItem('books', JSON.stringify(updatedBooks));\n\n  isBookAlreadyInShoppingList = false;\n  toggleButtonsVisibility();\n};\n\nconst createPopUp = async bookId => {\n  const bookData = await fetchBookById(bookId);\n  currentBookData = bookData;\n\n  const storedBooks = JSON.parse(localStorage.getItem('books')) || [];\n  isBookAlreadyInShoppingList = storedBooks.some(book => book._id === bookData._id);\n  toggleButtonsVisibility();\n\n  bookCover.src = bookData.book_image;\n  bookAmazonLink.href = bookData.amazon_product_url;\n  const markup = `<h2 class=\"popup__title\">${bookData.title}</h2>\n                <p class=\"popup__author\">${bookData.author}</p>\n                <p class=\"popup__text\">${bookData.description}</p>`;\n  bookDescription.innerHTML = markup;\n\n  const shopsBooks = bookData.buy_links\n    .slice(1)\n    .map(\n      link =>\n        `<li class=\"popup__shops-item\"><a class=\"popup__shops-link\" href=\"${link.url}\" target=\"_blank\">${link.name}</a></li>`,\n    )\n    .join('');\n  shopsList.innerHTML = shopsBooks;\n};\n\nconst closePopUp = () => {\n  backdrop.classList.add('popup-is-hidden');\n\n  btnClosePopUp.removeEventListener('click', closePopUp);\n  backdrop.removeEventListener('click', backdropClickHandler);\n  document.removeEventListener('keydown', keydownHandler);\n};\n\nconst backdropClickHandler = event => {\n  if (event.target === backdrop) {\n    closePopUp();\n  }\n};\npopUp.addEventListener('click', event => {\n  event.stopPropagation();\n});\n\nconst keydownHandler = e => {\n  if (e.code === 'Escape') {\n    closePopUp();\n  }\n};\n\nconst openPopUp = e => {\n  if (e.target.closest('li')) {\n    const bookId = e.target.closest('li').dataset.id;\n    createPopUp(bookId);\n\n    btnClosePopUp.addEventListener('click', closePopUp);\n    backdrop.addEventListener('click', backdropClickHandler);\n    document.addEventListener('keydown', keydownHandler);\n\n    backdrop.classList.remove('popup-is-hidden');\n  }\n};\n\nlistBooks.addEventListener('click', openPopUp);\nlistBooksInCategories.addEventListener('click', openPopUp);\n\nbtnRemoveFromShoppingList.addEventListener('click', removeFromLocalStorage);\nbtnAddToShoppingList.addEventListener('click', addToLocalStorage);\n\nconst toggleDarkThemePopUp = () => {\n  const btnAddToShoppingList = document.querySelector('.popup__btn-add');\n  const btnRemoveFromShoppingList = document.querySelector('.popup__btn-remove');\n  const popUp = document.querySelector('.popup');\n  const comment = document.querySelector('.popup__comment');\n  const iconClose = document.querySelector('.popup__icon-close');\n  const amazonLogo = document.querySelector('.popup__amazon');\n\n  popUp.classList.toggle('popup-dark-theme');\n  iconClose.classList.toggle('icon-close-dark-theme');\n  btnAddToShoppingList.classList.toggle('btn-add-dark-theme');\n  btnRemoveFromShoppingList.classList.toggle('btn-remove-dark-theme');\n  comment.classList.toggle('comment-dark-theme');\n  amazonLogo.classList.toggle('amazon-dark-theme');\n};\n\n// toggleDarkThemePopUp();\n\n// openPopUp();\n// localStorage.clear();\n"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$lXnOV","$ac63d267681cf759$var$currentBookData","$ac63d267681cf759$var$bookCover","document","querySelector","$ac63d267681cf759$var$bookAmazonLink","$ac63d267681cf759$var$bookDescription","$ac63d267681cf759$var$btnAddToShoppingList","$ac63d267681cf759$var$btnRemoveFromShoppingList","$ac63d267681cf759$var$btnClosePopUp","$ac63d267681cf759$var$backdrop","$ac63d267681cf759$var$popUp","$ac63d267681cf759$var$comment","$ac63d267681cf759$var$shopsList","$ac63d267681cf759$var$listBooks","$ac63d267681cf759$var$listBooksInCategories","$ac63d267681cf759$var$isBookAlreadyInShoppingList","$ac63d267681cf759$var$toggleButtonsVisibility","classList","add","remove","$ac63d267681cf759$var$createPopUp","bookId","bookData","fetchBookById","storedBooks","JSON","parse","localStorage","getItem","some","book","_id","src","book_image","href","amazon_product_url","markup","title","author","description","innerHTML","shopsBooks","buy_links","slice","map","link","url","name","join","$ac63d267681cf759$var$closePopUp","removeEventListener","$ac63d267681cf759$var$backdropClickHandler","$ac63d267681cf759$var$keydownHandler","event","target","addEventListener","stopPropagation","e","$ac63d267681cf759$var$openPopUp","closest","dataset","updatedBooks","filter","setItem","stringify","bookExists","push"],"version":3,"file":"index.bd0bf985.js.map"}